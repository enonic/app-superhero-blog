<div>
    <div data-th-fragment="nestedComment (comments, hasComments)"
         data-th-remove="tag">
        <!--/*iterate over all comments here*/-->
        <ol class="top-level discussionTree">
            <div data-th-if="${hasComments}"
                 data-th-each="comment : ${ comments }"
                 data-th-remove="tag">
                <!--Level 1-->
                <div data-th-replace="/site/parts/comment-field/comment-single::single (${ comment} , true)" data-th-remove="tag"></div>
                <ol data-th-if="${ comment.children }">
                    <div data-th-each="comment2 : ${ comment.children }" data-th-remove="tag">
                        <!--Level 2-->
                        <div data-th-replace="/site/parts/comment-field/comment-single::single (${ comment2 }, true)"
                            data-th-remove="tag"></div>
                        <ol data-th-if="${ comment2.children }" data-th-attr="data-parentId=${ comment2._id }">
                            <div data-th-each="comment3 : ${ comment2.children }" data-th-remove="tag">
                                <!--Level 3-->
                                <div data-th-replace="/site/parts/comment-field/comment-single::single (${ comment3 }, null)"
                                    data-th-remove="tag"></div>
                            </div>
                        </ol>
                    </div>
                </ol>
            </div>
        </ol>
    </div>
</div>
